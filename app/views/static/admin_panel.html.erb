<%= form_with model:@configs, method: 'patch', html: {class: 'configs'} do |f| %>
  <fieldset>
    <legend>Nav:</legend>
    <%= f.label :title %>
    <%= f.text_field :title %>
    <%= f.label :hero %>
    <%= image_tag url_for(@configs.hero) %>
    <%= f.file_field :hero %>
    <%= f.label :logo %>
    <%= image_tag url_for(@configs.logo) %>
    <%= f.file_field :logo %>
    <fieldset>
      <legend>HeroBox: </legend>
      <%= fields_for @configs.hero_box do |hf| %>
        <%= hf.label :title %>
        <%= hf.text_field :title %>
        <%= hf.label :message %>
        <%= hf.text_field :message %>
        <%= hf.label :button %>
        <%= hf.text_field :button %>
        <%= hf.label :link %>
        <%= hf.text_field :link %>
      <% end %>
    </fieldset>
  </fieldset>
  <fieldset>
    <legend>Theme: </legend>
    <%= fields_for @configs.theme do |tf| %>
      <%= tf.label :primary %>
      <input type="color" name="theme[primary]" id="theme_primary" value="<%= @configs.theme.primary %>"%>
      <input type="text" value="<%= @configs.theme.primary %>" id="primaryText" disabled>
      <%= tf.label :background %>
      <input type="color" name="theme[background]" id="theme_background" value="<%= @configs.theme.background %>"%>
      <input type="text" value="<%= @configs.theme.background %>" id="backgroundText" disabled>
      <%= tf.label :subtitles %>
      <input type="color" name="theme[subtitles]" id="theme_subtitles" value="<%= @configs.theme.subtitles %>"%>
      <input type="text" value="<%= @configs.theme.subtitles %>" id="subtitlesText" disabled>
    <% end %>
  </fieldset>
  <%= f.submit %>
<% end %>
<script>
  document.getElementById('theme_primary').onchange = e => {
    document.getElementById('primaryText').value = e.target.value
  }
  document.getElementById('theme_background').onchange = e => {
    document.getElementById('backgroundText').value = e.target.value
  }
  document.getElementById('theme_subtitles').onchange = e => {
    document.getElementById('subtitlesText').value = e.target.value
  }
</script>
